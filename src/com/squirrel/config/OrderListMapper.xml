<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="OrderListMapper"> 
	<select id="" resultType="IsOrderListDTO">
		SELECT CC_NAME,CC_IMG,p.P_ID p_id,P_PDATE,P_UPLOADDATE,P_MAXPEOPLE,P_HOLE,P_CADDYYN,P_BABYN,P_CARTYN,P_PRICE,P_CONTENT,m.USER_NO manager_user_no,P_VCOUNT,NICKNAME,substr(PHONE_ID,1,3)||'-'||substr(PHONE_ID,4,4)||'-'||substr(PHONE_ID,8,4) PHONE_ID,
		case when P_PDATE-sysdate <![CDATA[<=]]> 0.5 then '긴급' 
		end emergency,pl.USER_NO user_no, g.LOC_ID loc_id,PICK_NO
		FROM PRODUCT p join GOLFCC g on p.CC_ID = g.CC_ID join MEMBERLIST m on p.USER_NO = m.USER_NO join PICKLIST pl on pl.P_ID = p.P_ID join LOCATION l on l.LOC_ID = g.LOC_ID
		where p.p_id=#{}
		<if test="">
			and PICK_NO=#{}
		</if>
	</select>
	
	<insert id="addOrder" parameterType="hashmap">
	INSERT INTO ORDERLIST(O_NO,O_AMOUNT,O_PRICE,P_ID,USER_NO) VALUES
	(O_NO_SQ.NEXTVAL,#{o_amount},#{o_price},#{p_id},#{user_no})
	</insert>
</mapper>